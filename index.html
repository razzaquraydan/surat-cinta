<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Untuk Salwa</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Courier New', monospace;
      background-color: #fff6f9;
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      flex-direction: column;
      text-align: center;
      padding: 20px;
    }
    button#startBtn {
      padding: 15px 30px;
      font-size: 1.2em;
      background-color: #f06292;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(240, 98, 146, 0.4);
      transition: background-color 0.3s ease;
    }
    button#startBtn:hover {
      background-color: #d04178;
    }
    div#imageSurprise {
      display: none;
      margin-top: 20px;
      text-align: center;
    }
    #imageSurprise img {
      max-width: 300px;
      border-radius: 10px;
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.2);
    }
    #pesan {
      white-space: pre-wrap;
      margin-top: 30px;
      font-size: 1.1em;
      max-width: 600px;
      background-color: rgba(255, 255, 255, 0.9);
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      border-right: 2px solid #f06292;
      animation: blink 1s infinite step-end;
      display: none;
    }
    @keyframes blink {
      50% { border-color: transparent; }
    }
  </style>
</head>
<body>

  <!-- Audio -->
  <audio id="audioPlayer" src="nadin.mp3"></audio>

  <!-- Tombol -->
  <button id="startBtn">Tap here to know how much I love you</button>

  <!-- Gambar + Textbox -->
  <div id="imageSurprise">
    <img src="salwa1.jpg" alt="Salwa Cantik" />
    <div style="margin-top: 15px;">
      <label for="responseBox">Kamu mau bilang apa? üòä</label><br>
      <textarea id="responseBox" rows="4" cols="40" placeholder="Tulis di sini ya..."></textarea>
    </div>
  </div>

  <!-- Pesan Cinta -->
  <div id="pesan"></div>

  <script>
    const startBtn = document.getElementById('startBtn');
    const pesanDiv = document.getElementById('pesan');
    const audio = document.getElementById('audioPlayer');
    const imageDiv = document.getElementById('imageSurprise');
    const speed = 130; // lebih lambat untuk ketikan biasa
    const sayangSpeed = 10;
    const startTime = 20;

    const teks = `Hi, Salwa !
Senang kamu masih hidup di dunia ini

Ga kerasa ya kita udah 7 bulan lebih
Seneng rasanya bisa punya pasangan kamu

Dari beribu warga antapani
Dari banyaknya warga bengkulu
Kamu lah yang hadir di hidupku
Dan akan menetap di hatiku

Selamanya...

Aku sayang banget sama kamu
Dan aku ingin kamu percaya
Tapi kamunya gak percaya üò¢
Oke kalo kamu masih ga percaya kalo aku sayang kamu
Aku bakal buktiin dengan cara bilang Aku sayang kamu 100 kali :

[sayang-loop]

Terimakasih telah menjadi bagian hidupku
Terimakasih atas semuanya, aku bahagia dan bersyukur
Semoga kita bertahan lama`;

    function mulaiSurat() {
      startBtn.style.display = 'none';
      imageDiv.style.display = 'block';
      pesanDiv.style.display = 'block';

      // Audio
      audio.addEventListener('loadedmetadata', () => {
        audio.currentTime = startTime;
        audio.play().catch(err => console.error("Gagal play audio:", err));
      });

      if (audio.readyState >= 1) {
        audio.currentTime = startTime;
        audio.play().catch(err => console.error("Gagal play audio:", err));
      }

      tampilkanPesan(teks);
    }

    function tampilkanPesan(teks) {
      let i = 0;
      const loopText = "Aku sayang kamu ‚ù§Ô∏è\n";
      const expandedText = teks.replace("[sayang-loop]", loopText.repeat(100));

      function ketik() {
        if (i < expandedText.length) {
          pesanDiv.innerHTML += expandedText.charAt(i);
          let currentSpeed = expandedText.substr(i, 17) === "Aku sayang kamu ‚ù§Ô∏è" ? sayangSpeed : speed;
          i++;
          setTimeout(ketik, currentSpeed);
        }
      }
      ketik();
    }

    startBtn.addEventListener('click', mulaiSurat);
  </script>

</body>
</html>
