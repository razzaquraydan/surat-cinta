<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Untuk Salwa</title>
  <style>
    body {
      margin: 0; padding: 0;
      font-family: 'Courier New', monospace;
      background-color: #fff6f9;
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      flex-direction: column;
      text-align: center;
      padding: 20px;
    }
    button#startBtn {
      padding: 15px 30px;
      font-size: 1.2em;
      background-color: #f06292;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(240, 98, 146, 0.4);
      transition: background-color 0.3s ease;
    }
    button#startBtn:hover {
      background-color: #d04178;
    }
    .center-message {
      margin-top: 30px;
      max-width: 600px;
      background-color: rgba(255, 255, 255, 0.9);
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      font-size: 1.1em;
      white-space: pre-line;
      border-right: 2px solid #f06292;
      animation: blink 1s infinite step-end;
      display: none;
    }
    @keyframes blink {
      50% { border-color: transparent; }
    }
  </style>
</head>
<body>

  <button id="startBtn">Tap here to know how I love you</button>

  <div class="center-message" id="pesan"></div>

  <audio id="audioPlayer" src="nadin.mp3"></audio>

<script>
  const startBtn = document.getElementById('startBtn');
  const pesanDiv = document.getElementById('pesan');
  const audio = document.getElementById('audioPlayer');
  const startTime = 20;
  const speed = 40;

  // Fungsi untuk ketik teks
  function ketik(teks, elemen, selesai) {
    let i = 0;
    elemen.style.display = 'block';
    function tulis() {
      if (i < teks.length) {
        elemen.innerHTML += teks.charAt(i);
        i++;
        setTimeout(tulis, speed);
      } else if (selesai) {
        selesai();
      }
    }
    tulis();
  }

  function mulaiAudio() {
    if (audio.duration > startTime) {
      audio.currentTime = startTime;
    }
    audio.play();
  }

  function mulaiSurat() {
    // Langkah-langkah surat
    pesanDiv.innerHTML = '';
    let bagian = [
      "Hi, Salwa !\nSenang kamu masih hidup di dunia ini\n",
      "(loading...)\n",
      "Ga kerasa ya kita udah 7 bulan lebih\nSeneng rasanya bisa punya pasangan kamu\n\n",
      "Dari beribu warga antapani\nDari banyaknya warga bengkulu\nKamu lah yang hadir di hidupku\nDan akan menetap di hatiku\n",
      "(loading...)\n",
      "Selamanya...\n",
      "(loading...)\n",
      "Aku sayang banget sama kamu\nDan aku ingin kamu percaya\nTapi kamunya gak percaya üò¢\nOke kalo kamu masih ga percaya kalo aku sayang kamu\nAku bakal buktiin dengan cara bilang Aku sayang kamu 100 kali :\n\n",
    ];

    let index = 0;

    function ketikBagianBerikut() {
      if (index < bagian.length) {
        ketik(bagian[index], pesanDiv, () => {
          if (bagian[index].includes('(loading...)')) {
            setTimeout(() => {
              index++;
              ketikBagianBerikut();
            }, 1000);
          } else {
            index++;
            ketikBagianBerikut();
          }
        });
      } else {
        // Tulis ‚ÄúAku sayang kamu‚Äù 100x
        let count = 0;
        function ulangSayang() {
          if (count < 100) {
            pesanDiv.innerHTML += `Aku sayang kamu ‚ù§Ô∏è\n`;
            count++;
            setTimeout(ulangSayang, 30);
          } else {
            // Lanjut ke bagian akhir
            ketik("\nTerimakasih telah menjadi bagian hidupku\nTerimakasih atas semuanya, aku bahagia dan bersyukur\nSemoga kita bertahan lama\n", pesanDiv);
          }
        }
        ulangSayang();
      }
    }

    mulaiAudio();
    ketikBagianBerikut();
  }

  startBtn.addEventListener('click', () => {
    startBtn.style.display = 'none';
    mulaiSurat();
  });
</script>

</body>
</html>
