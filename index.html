<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Untuk Salwa</title>
  <style>
    body {
      margin: 0; padding: 0;
      font-family: 'Courier New', monospace;
      background-color: #fff6f9;
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      flex-direction: column;
      text-align: center;
      padding: 20px;
    }
    button#startBtn {
      padding: 15px 30px;
      font-size: 1.2em;
      background-color: #f06292;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(240, 98, 146, 0.4);
      transition: background-color 0.3s ease;
    }
    button#startBtn:hover {
      background-color: #d04178;
    }
    .center-message {
      margin-top: 30px;
      max-width: 600px;
      background-color: rgba(255, 255, 255, 0.9);
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      font-size: 1.1em;
      white-space: pre-line;
      border-right: 2px solid #f06292;
      animation: blink 1s infinite step-end;
      display: none;
    }
    @keyframes blink {
      50% { border-color: transparent; }
    }
    img#imageSurprise {
      display: none;
      margin-top: 20px;
      max-width: 300px;
      border-radius: 10px;
      box-shadow: 0 0 12px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>

  <button id="startBtn">Tap here to know how much I love you</button>

  <div class="center-message" id="pesan"></div>

  <img id="imageSurprise" src="salwa1.jpg" alt="Untuk Salwa">
  <img id="imageSurprise" src="salwa2.jpg" alt="Untuk Salwa">
  <img id="imageSurprise" src="salwa3.jpg" alt="Untuk Salwa">

  <audio id="audioPlayer" src="nadin.mp3" muted></audio>

<script>
  const startBtn = document.getElementById('startBtn');
  const pesanDiv = document.getElementById('pesan');
  const audio = document.getElementById('audioPlayer');
  const image = document.getElementById('imageSurprise');
  const startTime = 20; // mulai dari detik ke-20
  const speed = 100; // ketik lambat

  function ketik(teks, elemen, selesai) {
    let i = 0;
    elemen.style.display = 'block';
    function tulis() {
      if (i < teks.length) {
        elemen.innerHTML += teks.charAt(i);
        i++;
        setTimeout(tulis, speed);
      } else if (selesai) {
        selesai();
      }
    }
    tulis();
  }

  function mulaiAudio() {
    // pastikan audio bisa dimulai dari detik tertentu setelah klik
    audio.currentTime = startTime;
    audio.play().catch((e) => {
      console.warn("Audio gagal diputar:", e);
    });
  }

  function mulaiSurat() {
    pesanDiv.innerHTML = '';
    image.style.display = 'block';

    let bagian = [
      "Hi, Salwa !\nSenang kamu masih hidup di dunia ini\n",
      "(pause)",
      "Ga kerasa ya kita udah 7 bulan lebih\nSeneng rasanya bisa punya pasangan kamu\n\n",
      "Dari beribu warga antapani\nDari banyaknya warga bengkulu\nKamu lah yang hadir di hidupku\nDan akan menetap di hatiku\n",
      "(pause)",
      "Selamanya...\n",
      "(pause)",
      "Aku sayang banget sama kamu\nDan aku ingin kamu percaya\nTapi kamunya gak percaya 😢\nOke kalo kamu masih ga percaya kalo aku sayang kamu\nAku bakal buktiin dengan cara bilang Aku sayang kamu 100 kali :\n\n"
    ];

    let index = 0;

    function ketikBagianBerikut() {
      if (index < bagian.length) {
        if (bagian[index] === "(pause)") {
          setTimeout(() => {
            index++;
            ketikBagianBerikut();
          }, 1000);
        } else {
          ketik(bagian[index], pesanDiv, () => {
            index++;
            ketikBagianBerikut();
          });
        }
      } else {
        let count = 0;
        function ulangSayang() {
          if (count < 100) {
            pesanDiv.innerHTML += `Aku sayang kamu ❤️\n`;
            count++;
            setTimeout(ulangSayang, 40);
          } else {
            ketik("\nTerimakasih telah menjadi bagian hidupku\nTerimakasih atas semuanya, aku bahagia dan bersyukur\nSemoga kita bertahan lama\n", pesanDiv);
          }
        }
        ulangSayang();
      }
    }

    mulaiAudio();
    ketikBagianBerikut();
  }

  startBtn.addEventListener('click', () => {
    startBtn.style.display = 'none';
    mulaiSurat();
  });
</script>

</body>
</html>
